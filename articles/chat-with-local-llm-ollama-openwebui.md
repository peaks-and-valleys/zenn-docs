---
title: "ãƒ­ãƒ¼ã‚«ãƒ« LLM ã¨ GUI ã§å¯¾è©±ã—ã¦ã€ã‚¦ã‚§ãƒ–æ¤œç´¢ã‚‚ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ (Ollama / Open WebUI / SearXNG)"
emoji: "ğŸŒŠ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [llm, ãƒ­ãƒ¼ã‚«ãƒ«llm, ollama, openwebui]
published: true
---

## ã“ã‚Œã‚’ã‚„ã£ãŸãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³

ç”ŸæˆAIã®åŠ›ã«ã¯ã‚ã‚„ã‹ã‚ŠãŸã„ãŒã€æŒã¡å‰ã®è²§ä¹æ€§ã®ã›ã„ã§ Claude Pro, Max ã¨ã‹ã«ãŠé‡‘ã‚’æ‰•ã†ã®ãŒã©ã†ã—ã¦ã‚‚æ†šã‚‰ã‚Œã‚‹ã€‚ã‚ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã«é–¢ã—ã¦ã‚‚ã€Open AI ã‚„ Claude ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ã†ã¨å¤šå°‘æ°—ã«ãªã‚‹ã¨ã“ã‚ã¯ã‚ã‚‹ã€‚ãã‚Œã‚’ç†ç”±ã«ä½¿ç”¨ã‚’ã‚„ã‚ã‚‹ã»ã©ã§ã¯ãªã„ã¨ã¯ã„ãˆã€‚

å¹¸ã„æ‰‹å…ƒã« RTX 3070 æ­è¼‰ã®ãƒã‚·ãƒ³ãŒã‚ã‚‹ã®ã§ã€ã“ã‚Œã§å‹•ã‹ã›ã‚‹ç¯„å›²ã®ãƒ¢ãƒ‡ãƒ«ã§ã„ã„æ„Ÿã˜ã®ã“ã¨ãŒã§ããªã„ã‹æ¢ã£ã¦ã„ãŸã€‚ã¨ã‚Šã‚ãˆãšå®Ÿç”¨æ€§ã®ã‚ã‚‹ LLM ã¨ã®å¯¾è©±ç’°å¢ƒã¯ä½œã‚ŒãŸã¨æ€ã†ã®ã§ã€ã“ã®è¨˜äº‹ã‚’æ›¸ãã“ã¨ã«ã—ãŸã€‚

## ä½¿ç”¨ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢

### [Ollama](https://ollama.com)

ãƒ­ãƒ¼ã‚«ãƒ« LLM ã®ãƒ¢ãƒ‡ãƒ«ã‚’ç®¡ç†ã—ãŸã‚Šå®Ÿè¡Œã—ãŸã‚Šã™ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã€‚CLI ã§ãŠæ‰‹è»½ã«ã„ã‚ã„ã‚ãªãƒ¢ãƒ‡ãƒ«ã‚’è©¦ã›ã¦ä¾¿åˆ©ã€‚GPU ã‚’ç©ã‚“ã§ã„ãªã„ãƒã‚·ãƒ³ã ã¨å®Ÿç”¨å¯èƒ½ãªæ€§èƒ½ã®ãƒ¢ãƒ‡ãƒ«ã¯å‹•ã‹ã›ãªã„ã‹ã‚‚ã€‚

### [Open WebUI](https://openwebui.com)

ãƒ­ãƒ¼ã‚«ãƒ« LLM ã¨å¯¾è©±ã™ã‚‹ãŸã‚ã® GUI ã‚’æä¾›ã—ã¦ãã‚Œã‚‹ã€‚CLI ã§ã‚‚å¯¾è©±è‡ªä½“ã¯ã§ãã‚‹ã®ã ãŒã€å¾Œè¿°ã®ã‚¦ã‚§ãƒ–æ¤œç´¢æ©Ÿèƒ½ã‚‚æ¬²ã—ã‹ã£ãŸã®ã§å°å…¥ã—ãŸã€‚

### [SearXNG](https://docs.searxng.org)

ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã®ãƒ¡ã‚¿æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã€‚è¤‡æ•°ã®æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã¦ã€çµæœã‚’ã„ã„æ„Ÿã˜ã«ã¾ã¨ã‚ã¦ãã‚Œã‚‹ã€‚æ­£ç›´ Open WebUI ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§åå‰ã‚’è¦‹ã‚‹ã¾ã§çŸ¥ã‚‰ãªã‹ã£ãŸã€‚

## ç’°å¢ƒæ§‹ç¯‰

ä»¥ä¸‹ã¯ã™ã¹ã¦ **WSL 2 (Ubuntu 24.04 on Windows 11)** ã§æ¤œè¨¼ã—ãŸã€‚Docker ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã§ã‚ã‚‹ã“ã¨ã‚’å‰æã«ã™ã‚‹ã€‚

### Ollama 

[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/ollama/ollama/blob/main/docs/linux.md)  ã«å¾“ã£ã¦ãƒ›ã‚¹ãƒˆ OS ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚Docker ã‚’ä½¿ã‚ãªã‹ã£ãŸã®ã¯ã€ã“ã‚Œä»¥å¤–ã®ã“ã¨ã«ã‚‚ä½¿ã„ãŸã‹ã£ãŸã‹ã‚‰ã€‚

Linux ã§ã‚ã‚Œã°ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ä¸€ç™ºã§å…¥ã‚‹ã€‚

```sh
curl -fsSL https://ollama.com/install.sh | sh
```

Ollama ã¯å‹æ‰‹ã«ç«‹ã¡ä¸ŠãŒã£ã¦å¸¸é§ã—ã¦ã„ã¦ã»ã—ã„ã®ã§ã€ãã®è¨­å®šã‚’è¡Œã†: [Adding Ollama as a startup service (recommended)](https://github.com/ollama/ollama/blob/main/docs/linux.md#adding-ollama-as-a-startup-service-recommended)

#### LLM ãƒ¢ãƒ‡ãƒ«

https://www.ollama.com/library ã®ä¸­ã‹ã‚‰ã€ãƒã‚·ãƒ³ã‚¹ãƒšãƒƒã‚¯ã¨ç›¸è«‡ã—ãªãŒã‚‰ä½¿ã„ãŸã„ãƒ¢ãƒ‡ãƒ«ã‚’ pull ã™ã‚‹ã€‚
è¨˜äº‹åŸ·ç­†æ™‚ç‚¹ã§ã¯ `qwen3` ãŒã„ã„æ„Ÿã˜ã ã£ãŸã®ã§ã€ãŸã¨ãˆã° `ollama pull qwen3:8b` ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

### Open WebUI, SearNXG

ã“ã®2ã¤ã¯ Docker ã‚³ãƒ³ãƒ†ãƒŠä¸Šã§å‹•ã‹ã™ã®ã§ã€å¾Œè¿°ã€‚

## `compose.yaml` ã®ä½œæˆ

å…ˆã«å®Œæˆå½¢ã‚’ç¤ºã™ã¨ã€ã“ã†ãªã‚‹ã€‚

```yaml: compose.yaml
name: open-webui-with-ollama
services:
  open-webui:
    container_name: open-webui
    image: ghcr.io/open-webui/open-webui:ollama
    restart: unless-stopped
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities:
                - gpu
    network_mode: host
    volumes:
      - open-webui:/app/backend/data
    environment:
      - ENABLE_WEB_SEARCH=true
      - WEB_SEARCH_ENGINE=searxng
      - SEARXNG_QUERY_URL=http://127.0.0.1:8888/search?q=<query>
  searxng:
    container_name: searxng
    image: searxng/searxng:latest
    ports:
      - "8888:8080"
    volumes:
      - ./searxng:/etc/searxng:rw
    restart: unless-stopped
    cap_drop:
      - ALL
    cap_add:
      - CHOWN
      - SETGID
      - SETUID
      - DAC_OVERRIDE
    logging:
      driver: "json-file"
      options:
        max-size: "1m"
        max-file: "1"
volumes:
  open-webui:
    external: true
    name: open-webui
```

### Open WebUI ç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’å®šç¾©

ã“ã‚Œã‚‚ [Quick Start](https://docs.openwebui.com/getting-started/quick-start/) ã«å¾“ã†ã ã‘â€¦â€¦ã ã¨æ€ã£ãŸã®ã ãŒã€è‡ªåˆ†ã®ç’°å¢ƒã§ã¯ãƒ›ã‚¹ãƒˆ OS ã® Ollama ã¨ã®é€šä¿¡ãŒã§ããªã‹ã£ãŸã€‚[ãƒãƒ¼ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ä½¿ã‚ãªã„](https://docs.openwebui.com/troubleshooting/connection-error#-docker-connection-error)ã“ã¨ã§å›é¿ã—ãŸã€‚

ã“ã®æ®µéšã§ã® `compose.yaml` ã¯ä»¥ä¸‹ã€‚ã‚¦ã‚§ãƒ–æ¤œç´¢ãŒå¿…è¦ãªã‘ã‚Œã°ã“ã‚Œã§ååˆ†å‹•ãã€‚GPU ã‚µãƒãƒ¼ãƒˆãŒä¸è¦ã§ã‚ã‚Œã°ã€`deploy` ã‚­ãƒ¼ã‚’å‰Šé™¤ã—ã¦ pull ã™ã‚‹ image ã‚’ `ghcr.io/open-webui/open-webui:main` ã«ã™ã‚Œã°å•é¡Œãªã„ã¯ãšã€‚

```yaml: compose.yaml
name: open-webui-with-ollama
services:
  open-webui:
    container_name: open-webui
    image: ghcr.io/open-webui/open-webui:ollama
    restart: unless-stopped
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities:
                - gpu
    network_mode: host
    volumes:
      - open-webui:/app/backend/data
volumes:
  open-webui:
    external: true
    name: open-webui
```

`docker compose up -d` -> `http://localhost:8080` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€UI ãŒè¡¨ç¤ºã•ã‚Œã‚Œã° ğŸ†—ã€‚åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®æ–°è¦ç™»éŒ²ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã€‚
### SearXNG ã®å°å…¥

#### `./searxng/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ

ã“ã®æ®µéšã§ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­èº«ã¯ç©ºã€‚å¾Œã®æ‰‹é †ã§

#### Open WebUI ã®ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`ENABLE_WEB_SEARCH`, `WEB_SEARCH_ENGINE`, `SEARXNG_QUERY_URL` ã‚’å®šç¾©ã™ã‚‹ã€‚

https://docs.openwebui.com/getting-started/env-configuration/#web-search

#### ã‚³ãƒ³ãƒ†ãƒŠã®å®šç¾©

ã“ã‚Œã‚‚ [Open WebUI ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒã‚ã‚Š](https://docs.openwebui.com/tutorials/web-search/searxng/#docker-compose-setup)ã€æ¦‚ã­ãã®ã¾ã¾ã€‚ãƒãƒ¼ãƒˆç•ªå·è¢«ã‚Šã‚’å›é¿ã—ãŸãã‚‰ã„ã€‚ãŠãã‚‰ãã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›¸ã‹ã‚ŒãŸå¾Œã«ç’°å¢ƒå¤‰æ•°ã®ä»•æ§˜ãŒå¤‰ã‚ã£ãŸãŸã‚ã€ã“ã¡ã‚‰ã‹ã‚‰ã®ã‚³ãƒ”ãƒšã ã‘ã§ã¯å‹•ä½œã—ãªã„ã“ã¨ã«æ³¨æ„ã€‚

å†æ²ã«ãªã‚‹ãŒã€`compose.yaml` ã®æœ€çµ‚ç³»ã¯ä»¥ä¸‹ã€‚

```yaml: compose.yaml
name: open-webui-with-ollama
services:
  open-webui:
    container_name: open-webui
    image: ghcr.io/open-webui/open-webui:ollama
    restart: unless-stopped
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities:
                - gpu
    network_mode: host
    volumes:
      - open-webui:/app/backend/data
    environment:
      - ENABLE_WEB_SEARCH=true
      - WEB_SEARCH_ENGINE=searxng
      - SEARXNG_QUERY_URL=http://127.0.0.1:8888/search?q=<query>
  searxng:
    container_name: searxng
    image: searxng/searxng:latest
    ports:
      - "8888:8080"
    volumes:
      - ./searxng:/etc/searxng:rw
    restart: unless-stopped
    cap_drop:
      - ALL
    cap_add:
      - CHOWN
      - SETGID
      - SETUID
      - DAC_OVERRIDE
    logging:
      driver: "json-file"
      options:
        max-size: "1m"
        max-file: "1"
volumes:
  open-webui:
    external: true
    name: open-webui
```

#### `./searxng/settings.yml` ã®ä¿®æ­£

ã“ã®æ®µéšã§ `docker compose up -d` ã™ã‚‹ã¨ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« `./searxng/settings.yml` ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚ã“ã“ã«2ç‚¹ã»ã©ã€ä¿®æ­£ã‚’åŠ ãˆã‚‹ã€‚

- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ json ã§è¿”ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼ˆ[å‚è€ƒ](https://github.com/open-webui/open-webui/discussions/3003#discussioncomment-9741643)ï¼‰

```yaml
# ~lines 60
  # remove format to deny access, use lower case.
  # formats: [html, csv, json, rss]
  formats:
    - html
    - json
```

- æ¤œç´¢çµæœãŒè¿”ã£ã¦ãã‚‹ã¾ã§ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“ã‚’ä¼¸ã°ã™ï¼ˆ[å‚è€ƒ](https://zenn.dev/link/comments/f1b49d76917709)ï¼‰

```yaml
outgoing:
  # default timeout in seconds, can be override by engine
  request_timeout: 10.0
```

## ä½¿ç”¨æ–¹æ³•

1. `docker compose up -d`
2. `http://localhost:8080` ã«ã‚¢ã‚¯ã‚»ã‚¹
	1. ã¤ã„ã§ã« `http://localhost:8888` ã§ SearXNG ã®æ¤œç´¢ã‚‚ä½¿ãˆã‚‹
